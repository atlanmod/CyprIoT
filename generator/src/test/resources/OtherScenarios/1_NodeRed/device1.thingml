thing switch {
	message switchState(isOn : UInt8)
	message remoteCommunication(bit : UInt8)
	
	required port sendingPort {
		sends switchState
	}
	required port receivePort {
		receives remoteCommunication
	}
	statechart SwitchBehavior init off {
		state off {
			on entry
			do
				println "I am Off !"
			end
			transition -> onn
			event e : receivePort?remoteCommunication
			guard e.bit==0
		}
		state onn {
			on entry 
			do
				println "I am on !"
			end
		}
	}
}
datatype UInt8<1>
	@type_checker `Integer`
	@c_type `uint8_t`
	@java_type `byte`
	@js_type `byte`

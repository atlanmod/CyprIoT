datatype UInt32<4>
	@c_type "uint32_t"
	@c_byte_size "4";

thing Thing1
@c_global "#include <SoftwareSerial.h>"
@c_global "SoftwareSerial XBee(2, 3);"
{
	
	message rawData(data: UInt32)
	
	required port dataEntryPoint {
		receives rawData
	}

	statechart thing1 init state1 {
		state state1 {
			internal event raw : dataEntryPoint?rawData
			action do 
			`			
			XBee.begin(9600);
			Serial.begin(9600);			
			while(true) {
				if (XBee.available()) { // If data comes in from XBee, send it out to serial monitor
					Serial.write(`&raw.data`);
				}
			}
			`
			end
		}
	}
}

protocol MQTT
@serializer "Binary"
;

configuration thing2Exec {
	instance thing1:Thing1
	connector thing1.dataEntryPoint over MQTT
}
